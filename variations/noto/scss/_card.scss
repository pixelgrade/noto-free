.c-card__action {
  @include btn;
  @include btn-overwrite;
}

.c-card__excerpt + .c-card__footer {
  margin-top: 2rem;
}

.c-meta__primary {

  ul {
    margin-left: -2rem;
    margin-right: -2rem;
  }

  li {
    @include meta-style;
  }
}

.c-card__aside {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: -1;

  transform: translate3d(-50%,-50%,0);

  opacity: 0;
  pointer-events: none;
  transition: opacity .3s ease-in-out;
}

.c-card__frame {
  position: relative;
  overflow: visible;

  img {
    width: auto;
    height: auto;

    max-width: 400px;
    max-height: 400px;
  }

  &:after {
    content: "";
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: $theme-accent-light-color;
    mix-blend-mode: color;
  }
}

.c-card {
  transform: translateZ(0);

  .wave-svg-mask {
    color: $theme-text-color;
  }
}

.c-card__letter {
  color: $theme-accent-light-color;
  transform: translateY(-50%) translateX(-50%);

  .c-gallery__item:not(.c-gallery__item--no-image) & {
    display: none;
  }
}

.c-card__thumbnail-background {
  background: none;
}

.c-card__letter {
  padding-left: 0.5em;
  padding-right: 0.5em;
}

.c-card {
  .c-card__content,
  .c-card__title {
    margin-top: 0;
  }

  .c-card__excerpt {
    margin-bottom: 0;
  }
}

.c-card__meta {
  width: auto;

  li:not(:first-child) {
    display: none;
  }

  li:not(:last-child):after {
    content: "";
  }
}

@include below(lap) {

  .c-card {
    overflow: hidden;
    padding: 0 4vw;

    .related-posts-container & {
      margin: 0;
      padding: 0;
    }
  }

  .c-card__aside {
    opacity: 0.25;
  }

  .c-card__frame {
    transform: none !important;
  }

  .c-meta__primary li:after,
  .c-card__action:before {
    display: none;
  }

  .c-noto {
    padding-bottom: 4rem;

    > article {
      margin-top: 4rem;

      &:nth-child(2n) {
        .c-card__aside {
          left: 100%;
          transform: translate3d(-8vw, -50%, 0);
        }
      }

      &:nth-child(2n+1) {
        .c-card__aside {
          right: 100%;
          left: auto;
          transform: translate3d(8vw, -50%, 0);
        }

        .c-card__excerpt {
          text-align: right;
        }
      }
    }

    > .pagination {
      padding: 0 4vw;
    }
  }
}

$card-offset: 21px;
$button-offset: 16px;

@include above(lap) {

  .c-card__action {
    transition: transform $transition-duration $transition-easing;

    .c-card:hover & {
      transform: translateX($button-offset);
    }

    &:before {
      transition: transform $transition-duration $transition-easing;
      transition-property: transform, left;
      transform-origin: 0 50%;
      transform: scale(0,1) translateZ(0);

      .c-card:hover & {
        transform: scale(1,1) translateZ(0);
        left: -$button-offset;
      }
    }
  }

  .c-card__title,
  .wave-svg-mask,
  .wave-svg {
    transition: transform $transition-duration $transition-easing;
  }

  .wave-svg-mask {
    direction: rtl;
  }

  .c-card:hover {

    .c-card__title,
    .wave-svg-mask {
      transform: translateX(-$card-offset);
    }

    .wave-svg {
      transform: translateX($card-offset);
    }
  }

  .c-meta__primary {

    li {
      border-bottom-left-radius: 999em;
      border-top-right-radius: 999em;
      overflow: hidden;
    }

    li:after {
      transition: all $transition-duration $transition-easing;
      transition-property: transform, opacity;
      transform: translateX(100%);
      opacity: 0;

      .c-card:hover & {
        transform: none;
        opacity: 1;
      }
    }

    a {
      display: block;
      transition: transform $transition-duration $transition-easing;
      transform: translateY(0.5em);

      .c-card:hover & {
        transform: none;
      }
    }
  }

  .c-card__excerpt {
    transition: color $transition-duration $transition-easing;

    .c-card:hover & {
      color: $theme-accent-color;
    }
  }

  .c-card:hover .c-card__aside {
    display: none;
  }

  .has-post-thumbnail .c-card__letter {
    display: none;
  }

  .c-noto > article {
    &:nth-of-type(3),
    &:nth-of-type(6n+7),
    &:nth-of-type(6n+9) {

      .wave-svg-mask {
        direction: ltr;
      }

      .c-card:hover {
        .c-card__title,
        .wave-svg-mask {
          transform: translateX($card-offset);
        }

        .wave-svg {
          transform: translateX(-$card-offset);
        }
      }
    }
  }
}

